<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manbaga Comics & Games</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'manga-accent': '#DC2626',
                    },
                    fontFamily: {
                        'comic': ['Bangers', 'cursive'],
                    }
                }
            }
        }
    </script>
    <style>
        .comic-border { border: 3px solid #0f0f0f; box-shadow: 6px 6px 0px 0px #0f0f0f; }
        .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 999; display: flex; align-items: center; justify-content: center; }
        .tab-button.active { background-color: #DC2626; color: white; }
    </style>
</head>
<body class="font-body bg-gray-50 text-black">

    <!-- PRODUCT DETAIL MODAL -->
    <div id="product-modal" class="hidden modal-backdrop" onclick="if(event.target===this)closeProductModal()">
        <div class="comic-border bg-white p-8 border-4 w-11/12 max-h-[90vh] overflow-y-auto md:w-2/3">
            <button onclick="closeProductModal()" class="float-right bg-manga-accent text-white px-4 py-2 font-bold border-2 border-black hover:bg-black mb-4">‚úï Chiudi</button>
            <div id="product-detail-content"></div>
        </div>
    </div>
    <div id="admin-modal" class="hidden modal-backdrop" onclick="if(event.target===this)closeAdminModal()">
        <div class="comic-border bg-white p-8 border-4 w-11/12 max-h-[90vh] overflow-y-auto">
            
            <!-- Login Screen -->
            <div id="admin-login">
                <h1 class="font-comic text-5xl text-center mb-8">üîê ADMIN LOGIN</h1>
                <div class="space-y-4 max-w-sm mx-auto">
                    <input type="password" id="password-input" placeholder="Password" class="w-full border-3 border-black p-3 font-bold" onkeypress="if(event.key==='Enter')checkAdminPassword()">
                    <button onclick="checkAdminPassword()" class="w-full bg-manga-accent text-white font-bold py-3 border-3 border-black hover:bg-black transition-all">ACCEDI</button>
                    <button onclick="closeAdminModal()" class="w-full bg-gray-300 font-bold py-3 border-3 border-black hover:bg-gray-400">Chiudi</button>
                </div>
                <p class="text-center text-gray-500 text-xs mt-4">Password demo: "admin"</p>
            </div>

            <!-- Dashboard -->
            <div id="admin-dashboard" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="font-comic text-4xl">‚öôÔ∏è ADMIN</h1>
                    <button onclick="logoutAdmin()" class="bg-manga-accent text-white px-4 py-2 font-bold border-2 border-black">Esci</button>
                </div>

                <div class="flex gap-2 mb-6 border-b-4 border-black pb-4 flex-wrap">
                    <button onclick="switchAdminTab('events')" class="tab-button active font-comic text-lg px-4 py-2 bg-manga-accent text-white border-2 border-black">EVENTI</button>
                    <button onclick="switchAdminTab('products')" class="tab-button font-comic text-lg px-4 py-2 border-2 border-black">PRODOTTI</button>
                </div>

                <!-- TAB EVENTI -->
                <div id="admin-tab-events" class="admin-tab-content">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="comic-border bg-white p-6 border-4">
                            <h2 class="font-comic text-3xl mb-4">‚ûï Aggiungi Evento</h2>
                            <input type="text" id="event-day" placeholder="Giorno (12)" class="w-full border-2 border-black p-2 mb-2 font-bold" maxlength="2">
                            <input type="text" id="event-month" placeholder="Mese (Gen)" class="w-full border-2 border-black p-2 mb-2 font-bold">
                            <input type="text" id="event-title" placeholder="Titolo" class="w-full border-2 border-black p-2 mb-2 font-bold">
                            <textarea id="event-desc" placeholder="Descrizione" class="w-full border-2 border-black p-2 mb-2 font-bold h-16"></textarea>
                            <input type="text" id="event-time" placeholder="Orario (15:30)" class="w-full border-2 border-black p-2 mb-2 font-bold">
                            <input type="text" id="event-price" placeholder="Info (5‚Ç¨)" class="w-full border-2 border-black p-2 mb-4 font-bold">
                            <button onclick="addAdminEvent()" class="w-full bg-manga-accent text-white font-bold py-2 border-3 border-black hover:bg-black">+ AGGIUNGI</button>
                        </div>
                        <div class="comic-border bg-white p-6 border-4">
                            <h2 class="font-comic text-3xl mb-4">üìã Eventi</h2>
                            <div id="admin-events-list" class="space-y-2 max-h-80 overflow-y-auto">
                                <p class="text-gray-500 text-center py-4">Nessun evento</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TAB PRODOTTI -->
                <div id="admin-tab-products" class="admin-tab-content hidden">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="comic-border bg-white p-6 border-4">
                            <h2 class="font-comic text-3xl mb-4">‚ûï Aggiungi Prodotto</h2>
                            <input type="text" id="product-title" placeholder="Titolo" class="w-full border-2 border-black p-2 mb-2 font-bold">
                            <input type="text" id="product-volume" placeholder="Volume (Vol. 12)" class="w-full border-2 border-black p-2 mb-2 font-bold">
                            <textarea id="product-desc" placeholder="Descrizione dettagliata" class="w-full border-2 border-black p-2 mb-2 font-bold h-16"></textarea>
                            <input type="text" id="product-image" placeholder="URL Immagine" class="w-full border-2 border-black p-2 mb-2 font-bold text-xs">
                            <input type="text" id="product-price" placeholder="Prezzo (es: 8,99‚Ç¨)" class="w-full border-2 border-black p-2 mb-2 font-bold">
                            <select id="product-badge" class="w-full border-2 border-black p-2 mb-4 font-bold bg-white">
                                <option value="">Nessun Badge</option>
                                <option value="NOVIT√Ä">NOVIT√Ä</option>
                                <option value="HOT">HOT</option>
                            </select>
                            <button onclick="addAdminProduct()" class="w-full bg-manga-accent text-white font-bold py-2 border-3 border-black hover:bg-black">+ AGGIUNGI</button>
                        </div>
                        <div class="comic-border bg-white p-6 border-4">
                            <h2 class="font-comic text-3xl mb-4">üì¶ Prodotti</h2>
                            <div id="admin-products-list" class="space-y-2 max-h-80 overflow-y-auto">
                                <p class="text-gray-500 text-center py-4">Nessun prodotto</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SITO PRINCIPALE -->
    <nav class="sticky top-0 z-50 bg-white border-b-4 border-black py-4 px-6 shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="#" id="logo-link" class="font-comic text-4xl tracking-wider hover:text-manga-accent cursor-pointer">
                MANBAGA<span class="text-manga-accent">.</span>
            </a>
            <div class="hidden md:flex space-x-8 font-bold text-lg uppercase items-center">
                <a href="#catalogo" class="hover:text-manga-accent">Catalogo</a>
                <a href="#eventi" class="hover:text-manga-accent">Eventi</a>
                <a href="#contatti" class="bg-manga-accent text-white px-6 py-1 hover:bg-black transition-colors skew-x-[-10deg]">
                    <span class="skew-x-[10deg] inline-block">Dove Siamo</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- HERO -->
    <header class="min-h-[70vh] bg-white border-b-4 border-black flex items-center justify-center">
        <div class="container mx-auto px-4 text-center">
            <div class="inline-block bg-manga-accent text-white px-4 py-2 font-comic text-xl mb-4 border-2 border-black">CANOSA DI PUGLIA</div>
            <h1 class="font-comic text-8xl md:text-9xl leading-none text-black mb-6">MANBAGA<br><span style="-webkit-text-stroke: 3px black;">COMICS</span></h1>
            <p class="text-2xl font-bold bg-white border-2 border-black p-4 inline-block mb-6 shadow-[6px_6px_0_#DC2626]">Il tuo rifugio per Manga, Comics & Games.</p>
            <a href="https://www.instagram.com/_manbaga_/" target="_blank" class="inline-block bg-black text-white border-4 border-black px-8 py-3 font-bold text-lg hover:bg-manga-accent transition-all shadow-[6px_6px_0_#DC2626]">
                üì± Seguici su IG
            </a>
        </div>
    </header>

    <!-- CATALOGO -->
    <section id="catalogo" class="py-20 px-4 bg-white">
        <div class="container mx-auto">
            <h2 class="font-comic text-6xl text-center mb-12 uppercase">Il Nostro Catalogo</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="comic-border bg-white p-4 border-4 hover:shadow-[8px_8px_0_#DC2626]">
                    <div class="bg-gray-900 h-48 mb-4 border-2 border-black"></div>
                    <h3 class="font-comic text-4xl mb-2">Manga & Comics</h3>
                    <p class="text-gray-600 font-bold">Shonen, Seinen, Shojo e le migliori graphic novel.</p>
                </div>
                <div class="comic-border bg-white p-4 border-4 hover:shadow-[8px_8px_0_#DC2626]">
                    <div class="bg-gray-900 h-48 mb-4 border-2 border-black"></div>
                    <h3 class="font-comic text-4xl mb-2">Carte & Giochi</h3>
                    <p class="text-gray-600 font-bold">Magic, Pok√©mon, Yu-Gi-Oh! e giochi da tavolo.</p>
                </div>
                <div class="comic-border bg-white p-4 border-4 hover:shadow-[8px_8px_0_#DC2626]">
                    <div class="bg-gray-900 h-48 mb-4 border-2 border-black"></div>
                    <h3 class="font-comic text-4xl mb-2">Gadget & Figures</h3>
                    <p class="text-gray-600 font-bold">Action figures, Funko Pop e accessori anime.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- NUOVI ARRIVI -->
    <section id="nuovi-arrivi" class="py-20 px-4 bg-black text-white border-t-4 border-manga-accent">
        <div class="container mx-auto">
            <h2 class="font-comic text-6xl text-center mb-12">üÜï APPENA ARRIVATI!</h2>
            <div id="products-display" class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">
                <!-- Prodotti aggiunti dinamicamente -->
            </div>
            <div class="text-center">
                <button class="bg-manga-accent text-white font-comic text-2xl px-10 py-4 border-4 border-black hover:bg-white hover:text-black transition-all shadow-[8px_8px_0_#fff]">
                    Vedi Tutto il Catalogo
                </button>
            </div>
        </div>
    </section>

    <!-- EVENTI -->
    <section id="eventi" class="py-20 px-4 bg-gray-100">
        <div class="container mx-auto">
            <h2 class="font-comic text-5xl mb-8">üìÖ PROSSIMI EVENTI</h2>
            <div id="events-display" class="space-y-6">
                <!-- Eventi aggiunti dinamicamente -->
            </div>
        </div>
    </section>

    <!-- CONTATTI -->
    <footer id="contatti" class="bg-black text-white py-20 px-4 border-t-8 border-manga-accent">
        <div class="container mx-auto grid md:grid-cols-3 gap-12">
            <div>
                <h2 class="font-comic text-5xl mb-4">MANBAGA<span class="text-manga-accent">.</span></h2>
                <p class="text-gray-400 mb-4">La tua fumetteria a Canosa di Puglia.</p>
            </div>
            <div>
                <h3 class="font-comic text-3xl text-manga-accent mb-4">ORARI</h3>
                <p class="text-gray-300">Lun-Sab: 10:00-13:00 | 17:00-21:00</p>
                <p class="text-gray-300">Domenica: Chiuso</p>
            </div>
            <div>
                <h3 class="font-comic text-3xl text-manga-accent mb-4">DOVE SIAMO</h3>
                <p class="text-gray-300">Via Padre Reginaldo Giuliani, 21</p>
                <p class="text-gray-300">Canosa di Puglia (BT)</p>
            </div>
        </div>
    </footer>

    <script>
        lucide.createIcons();
        let logoClicks = 0;
        let logoClickTimer;

        // STORAGE HELPERS
        function getEvents() {
            try {
                return JSON.parse(localStorage.getItem('manbaga-events') || '[]');
            } catch {
                return [];
            }
        }

        function setEvents(events) {
            localStorage.setItem('manbaga-events', JSON.stringify(events));
        }

        function getProducts() {
            try {
                return JSON.parse(localStorage.getItem('manbaga-products') || '[]');
            } catch {
                return [];
            }
        }

        function setProducts(products) {
            localStorage.setItem('manbaga-products', JSON.stringify(products));
        }

        // RENDER SULLA PAGINA
        function renderEvents() {
            const events = getEvents();
            const container = document.getElementById('events-display');
            
            if (events.length === 0) {
                container.innerHTML = '<p class="text-gray-600 text-center py-8">Nessun evento al momento</p>';
                return;
            }

            container.innerHTML = events.map(e => `
                <div class="bg-white border-4 border-black flex gap-0 shadow-[8px_8px_0_rgba(0,0,0,0.2)]">
                    <div class="bg-black text-white p-6 text-center min-w-[120px] border-r-4 border-black">
                        <p class="font-comic text-4xl">${e.day}</p>
                        <p class="font-bold">${e.month.toUpperCase()}</p>
                    </div>
                    <div class="p-6 flex-1">
                        <h3 class="font-comic text-3xl mb-2 text-black">${e.title}</h3>
                        <p class="text-gray-600 font-bold">${e.desc}</p>
                        <p class="text-manga-accent font-bold mt-2">‚è∞ ${e.time} | ${e.price}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderProducts() {
            const products = getProducts();
            const container = document.getElementById('products-display');
            
            if (products.length === 0) {
                container.innerHTML = '<p class="text-white text-center py-8 col-span-4">Nessun prodotto aggiunto</p>';
                return;
            }

            container.innerHTML = products.map(p => `
                <div class="relative group border-2 border-white hover:border-manga-accent transition-colors bg-gray-900 overflow-hidden cursor-pointer" onclick="openProductModal(${p.id})">
                    ${p.badge ? `<div class="absolute top-0 left-0 bg-manga-accent text-white font-bold px-3 py-1 text-sm z-10 skew-x-[-10deg] ml-[-5px]">${p.badge}</div>` : ''}
                    <img src="${p.image}" alt="${p.title}" class="w-full h-80 object-cover opacity-80 group-hover:opacity-100 transition-opacity" onerror="this.src='https://via.placeholder.com/300x400?text=Immagine'">
                    <div class="p-4 text-center bg-black border-t-2 border-white group-hover:border-manga-accent transition-colors">
                        <h4 class="font-comic text-2xl truncate text-white group-hover:text-manga-accent">${p.title}</h4>
                        <p class="text-sm text-gray-400">${p.volume}</p>
                        ${p.price ? `<p class="text-manga-accent font-bold text-lg">${p.price}</p>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // TRIPLO CLIC
        document.getElementById('logo-link').addEventListener('click', function(e) {
            e.preventDefault();
            logoClicks++;
            clearTimeout(logoClickTimer);
            
            if (logoClicks === 3) {
                logoClicks = 0;
                openAdminModal();
            }
            
            logoClickTimer = setTimeout(() => logoClicks = 0, 500);
        });

        function openAdminModal() {
            document.getElementById('admin-modal').classList.remove('hidden');
            document.getElementById('password-input').focus();
        }

        function closeAdminModal() {
            document.getElementById('admin-modal').classList.add('hidden');
            document.getElementById('admin-login').classList.remove('hidden');
            document.getElementById('admin-dashboard').classList.add('hidden');
            document.getElementById('password-input').value = '';
        }

        function checkAdminPassword() {
            const pwd = document.getElementById('password-input').value;
            if (pwd === '12032025Xd2%') {
                document.getElementById('admin-login').classList.add('hidden');
                document.getElementById('admin-dashboard').classList.remove('hidden');
                loadAdminData();
            } else {
                alert('‚ùå Password sbagliata!');
            }
        }

        function logoutAdmin() {
            document.getElementById('admin-login').classList.remove('hidden');
            document.getElementById('admin-dashboard').classList.add('hidden');
            document.getElementById('password-input').value = '';
        }

        function switchAdminTab(tab) {
            document.querySelectorAll('.admin-tab-content').forEach(el => el.classList.add('hidden'));
            document.getElementById('admin-tab-' + tab).classList.remove('hidden');
            document.querySelectorAll('.tab-button').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
        }

        // EVENTI
        function addAdminEvent() {
            const event = {
                id: Date.now(),
                day: document.getElementById('event-day').value,
                month: document.getElementById('event-month').value,
                title: document.getElementById('event-title').value,
                desc: document.getElementById('event-desc').value,
                time: document.getElementById('event-time').value,
                price: document.getElementById('event-price').value
            };

            if (!event.day || !event.month || !event.title || !event.desc) {
                alert('‚ö†Ô∏è Completa i campi obbligatori!');
                return;
            }

            let events = getEvents();
            events.push(event);
            setEvents(events);
            
            document.getElementById('event-day').value = '';
            document.getElementById('event-month').value = '';
            document.getElementById('event-title').value = '';
            document.getElementById('event-desc').value = '';
            document.getElementById('event-time').value = '';
            document.getElementById('event-price').value = '';
            
            loadAdminData();
            renderEvents();
            alert('‚úÖ Evento aggiunto!');
        }

        function deleteAdminEvent(id) {
            if (confirm('Elimina questo evento?')) {
                let events = getEvents();
                events = events.filter(e => e.id !== id);
                setEvents(events);
                loadAdminData();
                renderEvents();
            }
        }

        // PRODOTTI
        function addAdminProduct() {
            const product = {
                id: Date.now(),
                title: document.getElementById('product-title').value,
                volume: document.getElementById('product-volume').value,
                desc: document.getElementById('product-desc').value,
                image: document.getElementById('product-image').value,
                price: document.getElementById('product-price').value,
                badge: document.getElementById('product-badge').value
            };

            if (!product.title || !product.volume || !product.desc || !product.image) {
                alert('‚ö†Ô∏è Completa i campi obbligatori!');
                return;
            }

            let products = getProducts();
            products.push(product);
            setProducts(products);
            
            document.getElementById('product-title').value = '';
            document.getElementById('product-volume').value = '';
            document.getElementById('product-desc').value = '';
            document.getElementById('product-image').value = '';
            document.getElementById('product-price').value = '';
            document.getElementById('product-badge').value = '';
            
            loadAdminData();
            renderProducts();
            alert('‚úÖ Prodotto aggiunto!');
        }

        function deleteAdminProduct(id) {
            if (confirm('Elimina questo prodotto?')) {
                let products = getProducts();
                products = products.filter(p => p.id !== id);
                setProducts(products);
                loadAdminData();
                renderProducts();
            }
        }

        function loadAdminData() {
            const events = getEvents();
            const eventsList = document.getElementById('admin-events-list');
            
            if (events.length === 0) {
                eventsList.innerHTML = '<p class="text-gray-500 text-center py-4">Nessun evento</p>';
            } else {
                eventsList.innerHTML = events.map(e => `
                    <div class="border-2 border-manga-accent p-3 bg-red-50 flex justify-between items-start gap-2">
                        <div class="flex-1 text-sm">
                            <p class="font-bold"><span class="text-manga-accent">${e.day} ${e.month}</span> - ${e.title}</p>
                            <p class="text-xs text-gray-600">${e.time} | ${e.price}</p>
                        </div>
                        <button onclick="deleteAdminEvent(${e.id})" class="bg-manga-accent text-white px-2 py-1 font-bold text-xs hover:bg-black flex-shrink-0">‚úï</button>
                    </div>
                `).join('');
            }

            const products = getProducts();
            const productsList = document.getElementById('admin-products-list');
            
            if (products.length === 0) {
                productsList.innerHTML = '<p class="text-gray-500 text-center py-4">Nessun prodotto</p>';
            } else {
                productsList.innerHTML = products.map(p => `
                    <div class="border-2 border-manga-accent p-3 bg-blue-50 flex justify-between items-start gap-2">
                        <div class="flex-1 text-sm">
                            <p class="font-bold">${p.title}</p>
                            <p class="text-xs text-gray-600">${p.volume}${p.badge ? ' - ' + p.badge : ''}</p>
                        </div>
                        <button onclick="deleteAdminProduct(${p.id})" class="bg-manga-accent text-white px-2 py-1 font-bold text-xs hover:bg-black flex-shrink-0">‚úï</button>
                    </div>
                `).join('');
            }
        }

        // CARICA TUTTO AL LOAD
        document.addEventListener('DOMContentLoaded', function() {
            renderEvents();
            renderProducts();
        });

        // PRODUCT MODAL
        function openProductModal(productId) {
            const products = getProducts();
            const product = products.find(p => p.id === productId);
            
            if (!product) return;

            const content = `
                <div class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <img src="${product.image}" alt="${product.title}" class="w-full border-4 border-black comic-border" onerror="this.src='https://via.placeholder.com/300x400?text=Immagine'">
                        </div>
                        <div>
                            ${product.badge ? `<div class="inline-block bg-manga-accent text-white font-bold px-4 py-2 text-lg mb-4 border-2 border-black">${product.badge}</div>` : ''}
                            <h1 class="font-comic text-5xl mb-4 text-black">${product.title}</h1>
                            <p class="text-2xl font-bold text-manga-accent mb-2">${product.volume}</p>
                            ${product.price ? `<p class="text-3xl font-bold text-black mb-6">${product.price}</p>` : ''}
                            <button class="w-full bg-manga-accent text-white font-bold py-4 text-xl border-4 border-black hover:bg-black transition-all shadow-[6px_6px_0_#000]">
                                üõí Aggiungi al Carrello
                            </button>
                        </div>
                    </div>
                    <div class="comic-border bg-gray-50 p-6 border-4">
                        <h2 class="font-comic text-4xl mb-4 text-black">Descrizione</h2>
                        <p class="text-lg font-bold text-gray-700 whitespace-pre-wrap">${product.desc}</p>
                    </div>
                </div>
            `;

            document.getElementById('product-detail-content').innerHTML = content;
            document.getElementById('product-modal').classList.remove('hidden');
        }

        function closeProductModal() {
            document.getElementById('product-modal').classList.add('hidden');
        }
    </script>
</body>
</html>
